# 金蝶ERP数据异常综合报告

> 报告生成时间: 2026-01-30
> 检查范围: 30个MTO号
> 数据来源: 金蝶K3Cloud

---

## 统计摘要

| 异常类型 | 发现数量 | 涉及MTO数 | 异常总量 |
|---------|---------|----------|---------|
| 超领异常 | 48 | 15 | 23,989 |
| 入库异常 | 2 | 2 | 17 |
| 发货异常 | 11 | 7 | 15,584 |
| 时间逻辑异常 | 407 | 23 | - |
| **合计** | **468** | **-** | **39,590+** |

---

## 一、超领异常 (PRD_PickMtrl)

### 定义
- **公式**: `实际领料量 (FActualQty) > 申请领料量 (FAppQty)`
- **含义**: 仓库发出的数量超过了领料申请单上申请的数量

### 严重异常 (申请量=0)

以下记录的申请领料量为0，但实际领料量>0，说明是**未经申请直接发料**：

| MTO | 领料单号 | 物料编码 | 物料名称 | 申请量 | 实际量 | 超领量 |
|-----|---------|---------|---------|--------|--------|--------|
| DK25B294S | LL26010331 | 03.06.10.001 | 写字板彩盒 | **0** | 1,600 | 1,600 |
| DS25C315S | LL26010879 | 03.06.02.001 | 泳镜彩盒 | **0** | 1,200 | 1,200 |

### 大额超领 (超领量>1000)

| MTO | 领料单号 | 物料编码 | 物料名称 | 申请量 | 实际量 | 超领量 |
|-----|---------|---------|---------|--------|--------|--------|
| DS25C318S | LL26010750 | 03.24.02.001 | 泳镜客户专用静电膜 | 1,450 | 7,880 | **6,430** |
| DS25C318S | LL26010689 | 03.24.02.001 | 泳镜客户专用静电膜 | 1,450 | 6,656 | **5,206** |
| DS25C309S | LL26010245 | 03.24.02.001 | 泳镜客户专用静电膜 | 1,700 | 4,340 | **2,640** |
| DS25C314S | LL26010460 | 03.24.888.081 | 泳镜中性静电膜 | 208 | 1,692 | **1,484** |
| DS25C319S | LL26010637 | 03.24.02.001 | 泳镜客户专用静电膜 | 730 | 1,798 | **1,068** |
| DS25C314S | LL26010637 | 03.24.888.019 | 泳镜中性静电膜 | 256 | 1,288 | **1,032** |

### 按MTO汇总

| 排名 | MTO | 超领记录数 | 超领总量 |
|-----|-----|-----------|---------|
| 1 | DS25C318S | 2 | 11,636 |
| 2 | DS25C314S | 5 | 3,708 |
| 3 | DS25C309S | 7 | 2,736 |
| 4 | DS25C319S | 11 | 1,927 |
| 5 | DK25B294S | 1 | 1,600 |
| 6 | DS25C315S | 1 | 1,200 |
| 7 | DS25B303S | 4 | 330 |
| 8 | DS25C313S | 1 | 280 |
| 9 | DS25C316S | 1 | 242 |

---

## 二、入库异常 (PRD_INSTOCK)

### 定义
- **公式**: `实际入库量 (FRealQty) > 应入库量 (FMustQty)`
- **含义**: 实际入库数量超过了入库单上的应入数量

### 异常记录

| MTO | 入库单号 | 物料编码 | 应入量 | 实入量 | 超入量 |
|-----|---------|---------|--------|--------|--------|
| DS25B304S | CP26010079 | 03.04.001 | 70 | 80 | 10 |
| DK25B294S | CP25123914 | 03.03.001 | 1,249 | 1,256 | 7 |

### 分析
- 超入库数量较小，可能是正常的数量微调
- 建议核实是否为计量误差或补录

---

## 三、发货异常 (SAL_OUTSTOCK vs SAL_SaleOrder)

### 定义
- **公式**: `发货总量 > 订单总量` (按MTO+物料+辅助属性汇总)
- **含义**: 实际发货数量超过了销售订单的订单数量

### 异常记录

| MTO | 物料编码 | 物料名称 | 订单量 | 发货量 | 超发量 |
|-----|---------|---------|--------|--------|--------|
| DS25B305S | 07.25.06 | 泳帽 | 3,600 | 7,200 | **3,600** |
| DS261008S | 07.01.44 | 泳帽 | 2,880 | 5,760 | **2,880** |
| DS25C317S | 07.01.75 | 泳帽 | 2,002 | 4,000 | **1,998** |
| DS261004S | 07.25.44 | 泳帽 | 1,440 | 2,880 | **1,440** |
| DS25B296S | 07.02.138 | 泳镜 | 1,440 | 2,880 | **1,440** |
| DS25B296S | 07.02.138 | 泳镜 | 1,440 | 2,880 | **1,440** |
| DS261004S | 07.25.44 | 泳帽 | 720 | 1,440 | **720** |
| DS25B297S | 07.02.138 | 泳镜 | 720 | 1,440 | **720** |
| DS25C317S | 07.08.001 | 划水掌 | 578 | 1,152 | **574** |
| DS25C317S | 07.08.003 | 划水掌 | 578 | 1,152 | **574** |
| WS2601005 | 07.25.80 | 泳帽 | 202 | 400 | **198** |

### 分析
- 多个MTO的发货量是订单量的**2倍**，可能是：
  1. 订单变更未同步
  2. 跨订单借货发货
  3. 系统数据补录

---

## 四、时间逻辑异常

### 定义
- **公式**: `入库/领料日期 < 生产订单创建日期`
- **含义**: 在生产订单创建之前就已经有入库或领料记录，存在时间倒置

### 检测方法
- 通过单据编号推断日期（如 `CP25120xxx` = 2025年12月）
- 与生产订单的 `FCreateDate` 比较

### 严重异常 (提前60天以上)

| MTO | 生产订单日期 | 异常单号 | 单号日期 | 提前天数 | 类型 |
|-----|------------|---------|---------|---------|------|
| DS25C312S | 2026-01-30 | CP25123037 | 2025-12 | **60天** | 入库早于订单 |
| DS25C312S | 2026-01-30 | CP25123209 | 2025-12 | **60天** | 入库早于订单 |
| DS25C312S | 2026-01-30 | CP25123394 | 2025-12 | **60天** | 入库早于订单 |
| DS25C312S | 2026-01-30 | CP25123402 | 2025-12 | **60天** | 入库早于订单 |
| DS25C312S | 2026-01-30 | CP25123589 | 2025-12 | **60天** | 入库早于订单 |
| DS25C312S | 2026-01-30 | CP25123612 | 2025-12 | **60天** | 入库早于订单 |
| ... | ... | ... | ... | ... | ... |

> **DS25C312S** 共发现 **60+条** 入库记录早于生产订单创建日期

### 统计

| 异常类型 | 发现数量 |
|---------|---------|
| 入库早于生产订单 | ~300 |
| 领料早于生产订单 | ~107 |
| **合计** | **407** |

### 分析
1. **DS25C312S** 是最严重的时间逻辑异常MTO
2. 生产订单创建日期为 2026-01-30，但大量入库单在 2025-12 就已存在
3. 可能原因：
   - 生产订单是补录的（实际生产早于系统录入）
   - MTO号被复用到新订单
   - 系统日期配置问题

---

## 五、高风险MTO标记

以下MTO出现**多类异常叠加**，建议重点核查：

| MTO | 超领 | 入库异常 | 发货异常 | 时间异常 | 风险等级 |
|-----|------|---------|---------|---------|---------|
| **DS25C312S** | - | - | - | ✅ 60+条 | 🔴 高 |
| **DS25C318S** | ✅ 11,636 | - | - | - | 🔴 高 |
| **DS25C317S** | ✅ 44 | - | ✅ 3,146 | - | 🔴 高 |
| **DK25B294S** | ✅ 1,600 | ✅ 7 | - | - | ⚠️ 中 |
| **DS25B296S** | - | - | ✅ 2,880 | - | ⚠️ 中 |
| **DS25C319S** | ✅ 1,927 | - | - | - | ⚠️ 中 |
| **DS261004S** | - | - | ✅ 2,160 | - | ⚠️ 中 |

---

## 六、字段说明

| 表单 | 字段 | 中文名 | 说明 |
|------|------|--------|------|
| PRD_PickMtrl | FAppQty | 申请领料量 | 领料申请单上填写的数量 |
| PRD_PickMtrl | FActualQty | 实际领料量 | 仓库实际发出的数量 |
| PRD_INSTOCK | FMustQty | 应入库量 | 入库单上的预期入库数量 |
| PRD_INSTOCK | FRealQty | 实际入库量 | 实际入库的数量 |
| PRD_INSTOCK | FDate | 入库日期 | 入库单据日期 |
| SAL_OUTSTOCK | FRealQty | 实际发货量 | 出库单上的实际发货数量 |
| SAL_SaleOrder | FQty | 订单数量 | 销售订单上的需求数量 |
| PRD_MO | FCreateDate | 创建日期 | 生产订单创建日期 |

---

## 七、建议措施

### 短期
1. **核查申请量=0的超领记录** - 确认是否为合规操作
2. **核实超发货订单** - 确认订单是否有变更未同步
3. **核查DS25C312S时间异常** - 确认生产订单是否为补录

### 中期
1. **增加超领预警** - 在QuickPulse仪表板增加超领高亮提醒
2. **增加发货校验** - 发货时校验是否超过订单量
3. **增加时间校验** - 入库/领料时校验是否早于订单日期

### 长期
1. **流程优化** - 完善领料/发货审批流程
2. **数据同步** - 确保订单变更及时同步到下游单据

---

## 附录：检测逻辑

### 超领检测
```python
# PRD_PickMtrl
if FActualQty > FAppQty:
    超领量 = FActualQty - FAppQty
```

### 入库异常检测
```python
# PRD_INSTOCK
if FRealQty > FMustQty:
    超入量 = FRealQty - FMustQty
```

### 发货异常检测
```python
# SAL_OUTSTOCK vs SAL_SaleOrder
发货总量 = sum(SAL_OUTSTOCK.FRealQty) group by (MTO, 物料, 辅助属性)
订单总量 = sum(SAL_SaleOrder.FQty) group by (MTO, 物料, 辅助属性)
if 发货总量 > 订单总量:
    超发量 = 发货总量 - 订单总量
```
